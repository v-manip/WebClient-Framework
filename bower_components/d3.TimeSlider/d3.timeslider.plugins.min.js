/* D3.TimeSlider - version 0.0.7 - 2013-11-04
 * See https://github.com/EOX-A/d3.TimeSlider for more information! */
!function(){TimeSlider.Plugin.EOWCS=function(){function a(a){var b,c=this;return this.options=null!=a?a:{},this.formatDate=function(a){return a.toISOString().substring(0,19)+"Z"},b=function(a,b,d){var e;return e=d3.xhr(WCS.EO.KVP.describeEOCoverageSetURL(c.options.url,c.options.eoid,{subsetTime:[c.formatDate(a),c.formatDate(b)]})),e.get(function(a,b){var e,f,g,h,i;if(a&&d(c.options.dataset,[]),f=[],b=WCS.Core.Parse.parse(b.responseXML),null!=b.coverageDescriptions&&b.coverageDescriptions.length>0)for(i=b.coverageDescriptions,g=0,h=i.length;h>g;g++)e=i[g],f.push([new Date(e.timePeriod[0]),new Date(e.timePeriod[1])]);return d(c.options.dataset,f)})}}return a}(),TimeSlider.Plugin.WMS=function(){function a(a){var b,c=this;return this.options=null!=a?a:{},b=function(a,b,d){return"undefined"!=typeof JSON&&null!==JSON&&(c.data=JSON.parse(localStorage.getItem(c.options.url))),null==c.data?d3.xml(""+c.options.url+"?service=wms&request=getCapabilities","application/xml",function(a,b){var e,f,g,h,i,j,k;if(null==c.data&&(c.data={layers:{},reloaded_at:null}),!a){for(c.data.reloaded_at=new Date,h=d3.select(b),k=h.selectAll('Layer > Dimension[name="time"]')[0],i=0,j=k.length;j>i;i++)f=k[i],g=d3.select(f.parentNode).select("Name").text(),e=d3.select(f).text().split(","),c.data.layers[g]=e;return"undefined"!=typeof JSON&&null!==JSON&&localStorage.setItem(c.options.url,JSON.stringify(c.data)),d(c.options.dataset,c.data.layers[c.options.eoid])}}):d(c.options.dataset,c.data.layers[c.options.eoid])}}return a}()}.call(this);