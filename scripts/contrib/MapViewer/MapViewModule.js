define(["backbone.marionette","app","communicator","./MapViewController","./MapViewRouter","keypress"],function(a,b,c,d){"use strict";b.module("MapViewer",function(){this.startsWithParent=!0,this.on("start",function(){this.instances={},this.idx=0,console.log("[MapViewerModule] Finished module initialization")}),this.createController=function(b){var c=void 0,e=void 0;"undefined"!=typeof b?(c=b.id,e=b.startPosition):e={x:15,y:47,l:6};for(var f in this.instances)if(!this.instances[f].isActive())return console.log("Free map viewer returned "+f),this.instances[f].connectToView(),this.instances[f];"undefined"==typeof c&&(c="MapViewer."+this.idx++);var g=new d({id:c,startPosition:e});return this.instances[c]=g,a(g),g};var a=function(a){keypress.combo("a",function(){var b=a.getStartPosition();a.centerAndZoom(b.x,b.y,b.l)})}})});