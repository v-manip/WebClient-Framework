define(["backbone.marionette","app","communicator","./VirtualGlobeViewController","./VirtualGlobeViewRouter"],function(a,b,c,d){"use strict";b.module("VirtualGlobeViewer",function(){this.startsWithParent=!0,this.on("start",function(){this.instances={},this.idx=0,console.log("[VirtualGlobeViewer] Finished module initialization")}),this.createController=function(b){var c=void 0,e=void 0;"undefined"!=typeof b?(c=b.id,e=b.startPosition):e={center:[15,47],distance:0,duration:100,tilt:40};for(var f in this.instances)if(!this.instances[f].isActive())return console.log("Free globe viewer returned "+f),this.instances[f].connectToView(),this.instances[f];"undefined"==typeof c&&(c="VirtualGlobeViewer."+this.idx++);var g=new d({id:c,startPosition:e});return this.instances[c]=g,a(g),g};var a=function(a){keypress.combo("a",function(){var b=a.getStartPosition();a.zoomTo({x:b.center[0],y:b.center[1],l:void 0})}),keypress.combo("d",function(){a.dumpLayerConfig()})}})});