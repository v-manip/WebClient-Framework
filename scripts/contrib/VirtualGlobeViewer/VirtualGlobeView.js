define(["backbone.marionette","app","communicator","./GlobeRenderer/Globe"],function(a,b,c,d){"use strict";var e=a.View.extend({tagName:"canvas",className:"globe",initialize:function(a){this.isClosed=!0,this.startPosition=a.startPosition,"undefined"==typeof this.startPosition&&(this.startPosition={geoCenter:[15,47],distance:0,duration:3e3,tilt:40}),this.startProduct=a.startProduct,$(window).resize(function(){this.globe&&this.onResize()}.bind(this))},addAreaOfInterest:function(a){this.globe.addAreaOfInterest(a)},selectProduct:function(a,b){this.globe.selectProduct(a,b),console.log("[GlobeView::selectProduct] selected "+a.get("name"))},createGlobe:function(){this.globe=new d({canvas:this.el}),"undefined"!=typeof this.startProduct&&this.globe.selectProduct(this.startProduct,!0)},onResize:function(){this.globe.updateViewport()},onShow:function(){this.globe||this.createGlobe(),this.isClosed=!1,this.onResize(),this.zoomTo(this.startPosition)},zoomTo:function(a){this.globe&&this.globe.zoomTo(a)},onClose:function(){this.isClosed=!0}});return e});