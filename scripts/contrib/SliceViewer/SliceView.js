define(["backbone.marionette","app","communicator","xtk","xtk-gui"],function(a,b,c,d,e){"use strict";var f=a.View.extend({className:"sliceview",initialize:function(){this.renderer=null,this.isClosed=!0,this.baseInitDone=!1,$(window).resize(function(){this.renderer&&this.onResize()}.bind(this))},onResize:function(){this.renderer.resetBoundingBox(),this.renderer.resetViewAndRender()},onShow:function(){this.renderer||this.createRenderer(),this.isClosed=!1},onClose:function(){this.isClosed=!0},createRenderer:function(){var a=this.renderer=new d.renderer3D;a.container=this.el,a.bgColor=[1,1,1],a.init();var b=new d.volume;b.file="data/H2O.nii.gz",b.volumeRendering=!0,b.upperThreshold=219,b.opacity=.3,b.minColor=[.4,.4,.4],b.maxColor=[0,0,0],a.add(b),a.onShowtime=function(){if(!this.baseInitDone){var a=new e.GUI({autoPlace:!0});this.el.appendChild(a.domElement);var c=a.addFolder("Volume");c.add(b,"volumeRendering"),c.addColor(b,"minColor"),c.addColor(b,"maxColor"),c.add(b,"opacity",0,1).listen(),c.add(b,"lowerThreshold",b.min,b.max),c.add(b,"upperThreshold",b.min,b.max),c.add(b,"windowLow",b.min,b.max),c.add(b,"windowHigh",b.min,b.max),c.add(b,"indexX",0,b.range[0]-1),c.add(b,"indexY",0,b.range[1]-1),c.add(b,"indexZ",0,b.range[2]-1),this.baseInitDone=!0}}.bind(this),a.camera.position=[120,80,160],a.render()}});return f});